<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Главная</title>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.2/angular.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!--<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>-->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">-->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        var app = angular.module("Tensor", []);
        app.controller("TensorController", function ($scope, $http) {
            $scope.test = function (event) {
                debugger
            }
            var TC = this;
            TC.database = [];
            TC.loadList = function () {
                var text = document.getElementById("us").value;
                if (text == "") text = "0";

                TC.database = [{
                    surname: 'Mamedov',
                    name: 'Valentin',
                    photo: 'https://www.kino-teatr.ru/news/10985/106732.jpg',
                    status:'ML, Front'
                }, {
                    surname: 'Savchenko',
                    name: 'Ivan',
                    photo: 'https://gorabbit.ru/upload/resize_cache/iblock/7a2/480_300_2/7a206ca71129095b6ad794b451331992.jpg',
                    status:'ML, Back'
                }, {
                    surname: 'Soldatov',
                    name: 'Denis',
                    photo: 'https://stickerzone.shop/wp-content/uploads/2018/06/%D0%A0%D0%B8%D0%BA-6.png',
                    status:'Back'
                }, {
                    surname: 'Mamedova',
                    name: 'Viktoria',
                    photo: 'https://www.vokrug.tv/pic/person/6/d/0/5/6d0567252a031e0fef5c0a7a4507501e.jpeg',
                    status:'Accountant'
                }, {
                    surname: 'Mamedov',
                    name: 'Yuri',
                    photo: 'https://www.vladtime.ru/uploads/posts/2018-08/1533394201_maxresdefault.jpg',
                    status:'CEO'
                }]


                // $http
                //     .get('http://159.69.85.34:8080/getusers/' + text)
                //     .success(function (result) {
                //         TC.database = result;
                //     })
                //     .error(function (error) {
                //         <!--alert("Error"+error);-->
                //     });
            };

            window.setInterval(
                function updateDiv1() {
                    TC.loadList();
                }, 5000
            );
            window.user_page = function (container) {
                // console.log(container.name, typeof (container))
                document.location.href = 'user.html?surname=' + container.title + '&name=' + container.name + '&photo=' + container.src
            }
            TC.loadList();
        });
    </script>
</head>
<body ng-app="Tensor" ng-controller="TensorController as tc">


<div class="header jumbotron text-center" style="height: 30px;">
    <object class="logo" data="https://helpme1c.ru/wp-content/uploads/2015/02/logo_42.png" width="180" height="120"
            onclick="location.href='index.html'">
        Your browser does not support SVG
    </object>
    <h1><b>Big Brother</b></h1>
</div>

<div class="offset-sm-4 col-sm-6">
    <h3>Поиск</h3>
    <form ng-submit="tc.loadList()">
        <input id="us" type="text" size="50"/>
        <input type="submit"/>
    </form>
</div>
<div class="row justify-content-center" style="height:600px; overflow-y: scroll;">
    <div id="here" class="col-sm-6">
        <table class="table">
            <thead>
            <tr>
                <th>Фото</th>
                <th>Фамилия</th>
                <th>Имя</th>
                <th>Должность</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat='user in tc.database'>
                <td><a><img name={{user.name}}
                            title={{user.surname}}
                            id='base64image'
                            src="{{user.photo}}"
                            class="round"
                            data-toggle="modal"
                            width="200" height="150" onclick=user_page(this)
                /></a></td>
                <td>{{user.surname}}</td>
                <td>{{user.name}}</td>
                <td>{{user.status}}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>